<!-- TITLE: Developer Environment Setup -->

This guide is for setting up your initial development environment. Once complete, you should consult the setup guide for the specific application you wish to work on. This guide was written for Arch Linux but it should work for any OS as long as you can install VirtualBox and Vagrant on it.

This guide does not discuss development tools such as text editors, OS, etc. It should be used as a guide to setting up common prerequisites for running Bookmark services.

This guide will reference the [developer portal](http://i.imgur.com/AzyAQpX.png) a lot because it is the one stop shop for all Bookmark resources.
# 0. Git
Bookmark uses Git for all version control. You can install it with `sudo pacman -S git`.
# 1. Vagrant
Because Bookmark developers have a wide variety of system configurations, Vagrant is used to standardize development environments. Vagrant will run a VM on your computer and sync your project files with the VM so all you need to do is SSH into the VM to run projects.
```
sudo pacman -s virtualbox
sudo pacman -S virtualbox-host-modules-arch
sudo pacman -S vagrant
```
Once you have installed VirtualBox and Vagrant, you can go to any Bookmark project directory and run `vagrant up` to launch a Vagrant box. Follow this with `vagrant ssh` and you can gain access to the box console to run and test projects.
# 2. Provisioning a Database
You can provision a database over at the developer portal @ https://dev.bookmark.services. `Provision Resources -> Create Development Database -> Sync Development Database`.

You should be presented with a prompt asking you to confirm. Click `Continue` and you should see your database connection details.

![Credentials Example](http://i.imgur.com/AzyAQpX.png)

The most important thing to note is the database name. The username and password details are for if you wish to administrate your database from the comfort of your preferred MySQL administration program like HeidiSQL. If you want to use the web UI to interact with you database you can check out [SQLBuddy](https://wiki.dev.bookmark.services/development/sqlbuddy). Also note that for those who are not using SQLBuddy you will need to specify `dev.bookmark.services` for your MySQL host.

These credentials are saved to your cookies. If you lose your credentials you can "create another database" to fetch the same credentials. This also means if your cookies are cleared you will never be able to fetch those credentials ever.
## Syncing a Database
Newly provisioned databases do not come with any pre-configured tables or data. You can sync your database with the latest official schema by going to `Provision Resources -> Sync Development Database` in the developer portal.

You should be presented with a prompt asking you for the name of your database. Fill in what was shown in the previous step and then click `Continue`.

**It is important ot note that syncing your database will wipe any tables with the same names as those in the official schema. Be sure to backup any important data before syncing! It is recommened to try using migration scripts first before syncing.**

# 3. Provisioning a Vault Token
In order to interface with the development database, your service will need to provide a Vault token. Vault tokens can be generated by going to the developer portal and going through `Provision Resources -> Create Vault Token`.

You will be presented with a prompt asking you to confirm. Click `Continue` and you should see your Vault token. Note that this token can only be shown once so if you lose it you will need to generate another token.

# 4. Prepping for Microservices
Vagrant must be prepped for microservices because Bookmark uses a microservice architecture. One of the most notable things required is mapping of hostnames to Vagrant boxes. This can be achieved by using [Vagrant Host Manager](https://github.com/devopsgroup-io/vagrant-hostmanager).
```
vagrant plugin install vagrant-hostmanager
```
Different services will have different setups for Host Manager so you should read the "Usage" section as that is the most important part.

# 5. Obtaining an Application Token
**This is not possible yet because provisioning application tokens has not been setup.**

Application tokens are what allows your service to be a service. In order to obtain one, you will need to go to the developer portal and clicking `Provision Resources -> Create Application Token`.

You will be presented with a prompt asking you for the name of your service. Fill it in and click `Continue` and you should see your application token. Note that this token can only be shown once so if you lose it you will need to generate another token. Application tokens are automatically generated and are bound to the service specified so don't make a typo!
# Arch -> Ubuntu Cheatsheet
```
pacman -S -> apt install
pacman -Syu -> apt-get update && apt upgrade
```

If you are running an Ubuntu version lower than 16.04 then the following applies to you.

```
systemctl start X.service -> service X start
apt upgrade -> apt-get upgrade
apt install -> apt-get install
```